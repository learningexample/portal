FROM python:3.11-slim

WORKDIR /app

# Install minimal dependencies
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Set timeout environment variable
ENV PIP_DEFAULT_TIMEOUT=100

# Copy requirements file
COPY requirements.txt .

# Install dependencies with verbose output
RUN pip install --no-cache-dir --upgrade pip && \
    pip install --no-cache-dir -r requirements.txt --verbose

# Just copy a single test file to verify the build works
COPY tests/test_dash.py .

# Command to run on container start - just prints success message
CMD ["echo", "Build completed successfully"]